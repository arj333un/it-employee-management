{% comment %} <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Password</title>
</head>
<body>
    <form method="POST" action="{% url 'password_reset_confirm' username=username%}">
        {% csrf_token %}
        <label for="new_password">Enter your otp:</label>
        <input type="text" name="otp">
        <input type="text" name="password">
        <input type="text" name="cpassword">
        <button type="submit">Submit</button>
      </form>
</body>
</html> {% endcomment %}

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Reset Password</title>
    <style>
        /* Import Google font - Poppins */
@import url("https://fonts.googleapis.com/css2?family=Poppins:wght@200;300;400;500;600;700&display=swap");
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
  font-family: "Poppins", sans-serif;
}
body {
  min-height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 20px;
  background:url("https://t3.ftcdn.net/jpg/00/21/70/82/360_F_21708280_RFKz4O7ImQluB9FgX2mUYFUNDmlLokX6.jpg");
  background-position: center center;
  background-repeat: no-repeat;
  background-attachment: fixed;
  background-size: cover;
}
.container {
  position: relative;
  max-width: 700px;
  width: 100%;
  background: #fff;
  padding: 25px;
  border-radius: 8px;
  box-shadow: 0 0 15px rgba(0, 0, 0, 0.1);
}
.container header {
  font-size: 1.5rem;
  color: #333;
  font-weight: 500;
  text-align: center;
}
.container .form {
  margin-top: 30px;
}
.form .input-box {
  width: 100%;
  margin-top: 20px;
}
.input-box label {
  color: #333;
}
.form :where(.input-box input, .select-box) {
  position: relative;
  height: 50px;
  width: 100%;
  outline: none;
  font-size: 1rem;
  color: #707070;
  margin-top: 8px;
  border: 1px solid #ddd;
  border-radius: 6px;
  padding: 0 15px;
}
.input-box input:focus {
  box-shadow: 0 1px 0 rgba(0, 0, 0, 0.1);
}
.form .column {
  display: flex;
  column-gap: 15px;
}
.form .gender-box {
  margin-top: 20px;
}
.gender-box h3 {
  color: #333;
  font-size: 1rem;
  font-weight: 400;
  margin-bottom: 8px;
}
.form :where(.gender-option, .gender) {
  display: flex;
  align-items: center;
  column-gap: 50px;
  flex-wrap: wrap;
}
.form .gender {
  column-gap: 5px;
}
.gender input {
  accent-color: rgb(130, 106, 251);
}
.form :where(.gender input, .gender label) {
  cursor: pointer;
}
.gender label {
  color: #707070;
}
.address :where(input, .select-box) {
  margin-top: 15px;
}
.select-box select {
  height: 100%;
  width: 100%;
  outline: none;
  border: none;
  color: #707070;
  font-size: 1rem;
}
.form button {
  height: 55px;
  width: 100%;
  color: #fff;
  font-size: 1rem;
  font-weight: 400;
  margin-top: 30px;
  border: none;
  cursor: pointer;
  transition: all 0.2s ease;
  background:grey;
}

.form button:hover {
  background:lightgrey;
}
/*Responsive*/
@media screen and (max-width: 500px) {
  .form .column {
    flex-wrap: wrap;
  }
  .form :where(.gender-option, .gender) {
    row-gap: 15px;
  }
}
.container .option{
  font-size: 14px;
  text-align: center;
}
.container .developer a,
.container .tl a{
  display: block;
  height: 45px;
  width: 100%;
  font-size: 15px;
  text-align:center;
  text-decoration: none;
  padding-left: 20px;
  line-height: 45px;
  color: #fff;
  border-radius: none;
  transition: all 0.3s ease;
}
.container .developer i,
.container .tl i{
  padding-right: 12px;
  font-size: 20px;
}
.container .tl a{
  background: linear-gradient(to right,  #00acee 0%, #1abeff 100%);
  margin: 20px 0 15px 0;
}
.container .tl a:hover{
  background: linear-gradient(to left,  #00acee 0%, #1abeff 100%);
  margin: 20px 0 15px 0;
}
.container .developer a{
  background: linear-gradient( to right,  #3b5998 0%, #476bb8 100%);
  margin: 20px 0 50px 0;
}
.container .developer a:hover{
  background: linear-gradient( to left,  #3b5998 0%, #476bb8 100%);
  margin: 20px 0 50px 0;
}
    </style>
    <script>
      function validatePassword() {
          const passwordField = document.getElementById("password");
          const password = passwordField.value;
          const passwordError = document.getElementById("password-error");

          // Define regular expressions for validation
          const minLength = 8; // Minimum length of the password
          const hasNumber = /\d/;
          const hasSpecialChar = /[!@#$%^&*()_+{}\[\]:;<>,.?~\\-]/;

          // Check if the password meets the criteria
          const isLengthValid = password.length >= minLength;
          const hasNumberValid = hasNumber.test(password);
          const hasSpecialCharValid = hasSpecialChar.test(password);

          // Display error messages if criteria are not met
          if (!isLengthValid) {
              passwordError.textContent = "Password must be at least 8 characters long.";
          } else if (!hasNumberValid) {
              passwordError.textContent = "Password must contain at least one number.";
          } else if (!hasSpecialCharValid) {
              passwordError.textContent = "Password must contain at least one special character.";
          } else {
              // Clear the error message if all criteria are met
              passwordError.textContent = "";
          }
      }
  </script>
  </head>
  <body>
    <section class="container">
      <header>Reset Password</header>
      <form method="POST" action="{% url 'password_reset_confirm' username=username%}"  class="form">
        {%csrf_token%}
        <div class="input-box">
          <label>Enter OTP</label>
          <input type="text" placeholder="Enter your OTP" name="otp" required />
        </div>

        <div class="input-box">
          <label>New Password</label>
          <input type="password" placeholder="Enter your new password" onkeyup="validatePassword()" name="password" id="password" required />
        </div>
        <span id="password-error" style="color: red;"></span> 
        <div class="input-box">
            <label>Confirm Password</label>
            <input type="password" placeholder="Confirm password" name="cpassword" required />
          </div>
          <!-- Display password validation error here -->
        </div>
        <button>Submit</button>
          
        </div>
        
      </form>
     
        <div class="developer">
          <a href="{% url 'password_reset_request' %}"> Back</a>
        </div>
        <div style="background-color:yellow;">{{errmsg}}</div>

    </section>
  </body>
</html>